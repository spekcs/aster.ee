---
import type { GetStaticPaths, GetStaticPathsOptions } from 'astro';
import { type CollectionEntry, getCollection } from 'astro:content';
import BlogLayout from '../../layouts/BlogLayout.astro';

interface Props {
page: {
  data: CollectionEntry<'posts'>[];
  }
}

const { page } = Astro.props;

export const getStaticPaths = (async ({ paginate }: GetStaticPathsOptions) => {
  const postsCollection = await getCollection('posts');

  const posts = postsCollection.map((post: any) => ({
    params: { id: post.id },
    props: { ...post }
  }))

  return paginate(
  posts.map((data: any) => data.props),
    { pageSize: 10}
    );
}) satisfies GetStaticPaths;
---

<BlogLayout posts={page.data}>

</BlogLayout>
