---
import { type CollectionEntry, getCollection, getEntry, render } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

interface Props {
  post: CollectionEntry<'posts'>;
}

export const getStaticPaths = async () => {
  const posts = await getCollection('posts');

  return posts.map((post: any) => ({
    params: { id: post.id },
    props: { post }
  }));
};

const { post, post: { id }} = Astro.props;

const entry = await getEntry('posts', id.replace(/\.[^/.]+$/, ""))!;

const { Content, headings } = await render(entry);
---


<BaseLayout pageTitle={post.data.title} blahaj={false}>
  <Content/> 
</BaseLayout>
